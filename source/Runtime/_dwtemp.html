<!DOCTYPE html>
<html lang="zh-CN">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>DeWeb - TChart</title>
</head>

<body style="background-color:#FAFAFA">
<script src="dist/vue.js" type="text/javascript"></script>
<script src="dist/index.js" type="text/javascript"></script>
<script src="dist/axios.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="dist/theme-chalk/index.css" />

    <div id="app" style="position:absolute;overflow-x:hidden;overflow-y:auto;left:0;right:0;bottom:0;margin: 0 auto;background-color:#FFFFFF" :style="{top:Form1_1__top,width:Form1_1__wid,height:Form1_1__hei}" >
        <el-dialog :title="input_query_caption" :visible.sync="input_query_visible" >
        	<el-form style="width:90%;padding-left:5%;">
        		<el-form-item :label="input_query_inputname" >
        			<el-input v-model="input_query_inputdefault" autocomplete="off"></el-input>
        		</el-form-item>
        	</el-form>
        	<div slot="footer" class="dialog-footer">
        		<el-button @click="input_query_visible=false">{{input_query_cancelcaption}}</el-button>
        		<el-button type="primary" @click="processinputquery">{{input_query_okcaption}}</el-button>
        	</div>
        </el-dialog>
		<iframe id="id_iframe" name="upload_iframe" style="display:none;"></iframe>
        <div id="ProgressBar1" :style="{left:ProgressBar1__lef,top:ProgressBar1__top,width:ProgressBar1__wid,height:ProgressBar1__hei}" style="position:absolute;">
            <el-progress :percentage="ProgressBar1__pct" type="line" :stroke-width="ProgressBar1__stw" :text-inside="ProgressBar1__tid" :color="ProgressBar1__clr" :show-text="ProgressBar1__swt">
            </el-progress>
        </div>
        <div id="ProgressBar2" :style="{left:ProgressBar2__lef,top:ProgressBar2__top,width:ProgressBar2__wid,height:ProgressBar2__hei}" style="position:absolute;">
            <el-progress :percentage="ProgressBar2__pct" type="circle" :color="ProgressBar2__clr" :show-text="ProgressBar2__swt">
            </el-progress>
        </div>
        <div id="ProgressBar3" :style="{left:ProgressBar3__lef,top:ProgressBar3__top,width:ProgressBar3__wid,height:ProgressBar3__hei}" style="position:absolute;">
            <el-progress :percentage="ProgressBar3__pct" type="dashboard" :color="ProgressBar3__clr" :show-text="ProgressBar3__swt">
            </el-progress>
        </div>
        <div id="ProgressBar4" :style="{left:ProgressBar4__lef,top:ProgressBar4__top,width:ProgressBar4__wid,height:ProgressBar4__hei}" style="position:absolute;">
            <el-progress :percentage="ProgressBar4__pct" type="line" :stroke-width="ProgressBar4__stw" :text-inside="ProgressBar4__tid" :color="ProgressBar4__clr" :show-text="ProgressBar4__swt">
            </el-progress>
        </div>
        <div id="ProgressBar5" :style="{left:ProgressBar5__lef,top:ProgressBar5__top,width:ProgressBar5__wid,height:ProgressBar5__hei}" style="position:absolute;">
            <el-progress :percentage="ProgressBar5__pct" type="line" :stroke-width="ProgressBar5__stw" :text-inside="ProgressBar5__tid" :color="ProgressBar5__clr" :show-text="ProgressBar5__swt">
            </el-progress>
        </div>
        <el-button id="Button1" size=medium v-if="Button1__vis" :disabled="Button1__dis" :type="Button1__typ" :style="{left:Button1__lef,top:Button1__top,width:Button1__wid,height:Button1__hei}" style="position:absolute;" @click.native="dwevent($event,'Button1','0','onclick','11010840')">{{Button1__cap}}
        </el-button>
        <el-button id="Button2" size=medium v-if="Button2__vis" :disabled="Button2__dis" :type="Button2__typ" :style="{left:Button2__lef,top:Button2__top,width:Button2__wid,height:Button2__hei}" style="position:absolute;" @click.native="dwevent($event,'Button2','0','onclick','11010840')">{{Button2__cap}}
        </el-button>
        <el-button id="Button3" size=medium v-if="Button3__vis" :disabled="Button3__dis" :type="Button3__typ" :style="{left:Button3__lef,top:Button3__top,width:Button3__wid,height:Button3__hei}" style="position:absolute;" @click.native="window.clearInterval(Timer1__tmr);">{{Button3__cap}}
        </el-button>
        <el-button id="Button4" size=medium v-if="Button4__vis" :disabled="Button4__dis" :type="Button4__typ" :style="{left:Button4__lef,top:Button4__top,width:Button4__wid,height:Button4__hei}" style="position:absolute;">{{Button4__cap}}
        </el-button>
	 </div>
    <script>
       Vue.prototype.dwsetcookie = function (c_name, value, expiredays) {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + expiredays);
            document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString()); 
       },
       Vue.prototype.dwgetcookie = function (name) {
            var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)"); 
            if(arr=document.cookie.match(reg))
                 return unescape(arr[2]); 
            else
                 return '';
       },
	    Vue.prototype.procResp = function (data){
		    resp = JSON.parse(decodeURIComponent(String(data))); 
		    if (resp.m === "update"){
		        eval(String(resp.o));
		    } else if (resp.m === "html"){
		        document.body.innerHTML="";document.write(String(resp.o));document.close();
		    } else if (resp.m === "showform"){
		        document.open();document.write(String(resp.o));
		    }
	    } 
        new Vue(
			{
				el: '#app',
				data: function () {
					return {
					    image_preview_list:[],
					    Form1_1__top:"0px",
					    Form1_1__wid:"360px",
					    Form1_1__hei:"640px",
                        ProgressBar1__lef:"30px",
                        ProgressBar1__top:"96px",
                        ProgressBar1__wid:"300px",
                        ProgressBar1__hei:"23px",
                        ProgressBar1__vis:true,
                        ProgressBar1__pct:35,
                        ProgressBar1__swt:true,
                        ProgressBar1__stw:23,
                        ProgressBar1__tid:true,
                        ProgressBar1__clr:"#FF00FF",
                        ProgressBar2__lef:"72px",
                        ProgressBar2__top:"216px",
                        ProgressBar2__wid:"200px",
                        ProgressBar2__hei:"153px",
                        ProgressBar2__vis:true,
                        ProgressBar2__pct:75,
                        ProgressBar2__swt:true,
                        ProgressBar2__stw:153,
                        ProgressBar2__tid:true,
                        ProgressBar2__clr:"#00FF00",
                        ProgressBar3__lef:"72px",
                        ProgressBar3__top:"392px",
                        ProgressBar3__wid:"200px",
                        ProgressBar3__hei:"153px",
                        ProgressBar3__vis:true,
                        ProgressBar3__pct:38,
                        ProgressBar3__swt:true,
                        ProgressBar3__stw:153,
                        ProgressBar3__tid:true,
                        ProgressBar3__clr:"#00FF00",
                        ProgressBar4__lef:"30px",
                        ProgressBar4__top:"144px",
                        ProgressBar4__wid:"300px",
                        ProgressBar4__hei:"15px",
                        ProgressBar4__vis:true,
                        ProgressBar4__pct:35,
                        ProgressBar4__swt:true,
                        ProgressBar4__stw:15,
                        ProgressBar4__tid:false,
                        ProgressBar4__clr:"#FF0000",
                        ProgressBar5__lef:"30px",
                        ProgressBar5__top:"184px",
                        ProgressBar5__wid:"300px",
                        ProgressBar5__hei:"15px",
                        ProgressBar5__vis:true,
                        ProgressBar5__pct:35,
                        ProgressBar5__swt:false,
                        ProgressBar5__stw:15,
                        ProgressBar5__tid:false,
                        ProgressBar5__clr:"#008000",
                        Button1__lef:"30px",
                        Button1__top:"32px",
                        Button1__wid:"139px",
                        Button1__hei:"35px",
                        Button1__vis:true,
                        Button1__dis:false,
                        Button1__cap:"Start/Pause",
                        Button1__typ:"primary",
                        Button2__lef:"192px",
                        Button2__top:"32px",
                        Button2__wid:"138px",
                        Button2__hei:"35px",
                        Button2__vis:true,
                        Button2__dis:false,
                        Button2__cap:"Reset",
                        Button2__typ:"primary",
                        Button3__lef:"8px",
                        Button3__top:"568px",
                        Button3__wid:"147px",
                        Button3__hei:"35px",
                        Button3__vis:true,
                        Button3__dis:false,
                        Button3__cap:"JS Pause",
                        Button3__typ:"primary",
                        Button4__lef:"176px",
                        Button4__top:"568px",
                        Button4__wid:"138px",
                        Button4__hei:"35px",
                        Button4__vis:true,
                        Button4__dis:false,
                        Button4__cap:"JS Start",
                        Button4__typ:"primary",
					    input_query_visible:false,
					    input_query_caption:"Input Query",
					    input_query_inputname:"new",
					    input_query_cancelcaption:"Cancel",
					    input_query_okcaption:"OK",
					    input_query_inputdefault:"",
					    input_query_method:"processinputquery",
					    input_query_visible:false,
					    version__istrial:false,
					    clientid:11010840,
					    shuntflag:3375
                    }
                },
                mounted() {
                    let me=this;
if (this.Timer1__tmr != null) {clearInterval(Timer1__tmr);Timer1__tmr=null};
Timer1__tmr = window.setInterval(function() {
axios.get('{"m":"event","i":11010840,"c":"Timer1"}',{headers:{shuntflag:3375}})
.then(resp =>{me.procResp(resp.data);  })
}, 200);
                    let Form1_1hearttimer = window.setInterval(function() {
                        axios.get('{"m":"heart","i":11010840}',{headers:{shuntflag:3375}})
                        .then(resp =>{me.procResp(resp.data)})
                        .catch((error) =>{me.dwnotify("Info","Network is disconnected!");clearInterval(Form1_1hearttimer);});
                    }, 590000);
                },
				methods: {
                    ToWebsite (e,n) {
                        var aTag = document.createElement('a'); 
                        aTag.setAttribute('href', e);
                        aTag.setAttribute('target', n);
                        aTag.click();
                    },
                    dwInputClick (e) {
                        document.getElementById(e).click();
                    },
                    dwInputChange (e) {
                        this[e+"__cap"] = document.getElementById(e+"__inp").files[0].name;
                        var sget = '{"m":"event","i":11010840,"c":"'+e+'","e":"getfilename","v":"'+escape(document.getElementById(e+"__inp").files[0].name)+'"}';
                        axios.get(sget)
                    },
                    filterHandler(value, row, column) {
                        const property = column['property'];
                        return row[property] === value;
                    },
                    dwInputSubmit (ipname) {
                        let me=this;let formData = new FormData();
                        formData.append('file', document.getElementById(ipname+"__inp").files[0]);
                        let config = {headers: {'Content-Type': 'multipart/form-data','clientid': '11010840'}}
                        axios.post('/upload', formData, config)
                        .then(function (res) {
                            var sget = '{"m":"event","i":11010840,"c":"'+ipname+'","e":"onenddock","v":"success"}';
                            axios.get(sget)
                            .then(resp =>{me.procResp(resp.data)});
                        })
                    },
                    dwInputSubmit0 (ipname) {
                        document.getElementById(ipname+"__frm").submit();
                    },
                    dwnotify(caption,text) {this.$notify.warning({ title: caption, message: text, duration: 0,showClose: false });},
                    dwevent(val,compname,compvalue,compevent,handle) {
                        var jo={};
                        jo.m="event";
                        jo.i=handle;
                        jo.c=compname;
                        jo.v=escape(eval(compvalue))
                        jo.e=compevent;
                        axios.get(escape(JSON.stringify(jo)),{headers:{shuntflag:3375}})
                        .then(resp =>{this.procResp(resp.data)});
                    },
                    processinputquery(val) {
                        this.input_query_visible = false;
                        axios.get('{"m":"interaction","i":11010840,"s":"inputquery","t":"'+this.input_query_method+'","v":"'+this.input_query_inputdefault+'"}',{headers:{shuntflag:3375}})
                        .then(resp =>{this.procResp(resp.data)});
                    },
                },
                beforeDestroy() {
                    clearInterval(hearttimer);
                }
            }
        ); 
    </script>
</body>
</html>
