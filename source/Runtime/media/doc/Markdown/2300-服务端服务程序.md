### 服务端服务程序

- 服务程序为DeWebServer\.exe

- 可双击直接运行

- 带参数命令行运行

  - 如果1个参数，则为运行端口号，如：DeWebServer 8081

  - 如果3个参数，则分别为端口号、窗体Left、窗体Top  

  - 如果5个参数，则分别为端口号、窗体Left、窗体Top、窗体Width、窗体Height

- 如果点击start按钮后，start按钮仍处于可用状态，则表明当前端口已被占用，请更换一个端口号或关闭使用该端口的程序后重新start。


- 功能按钮

  - 按钮Start用于启动DeWeb服务；
  - 按钮Stop用于停止DeWeb服务；
  - 按钮Slience用于系统调试，点击切换为Debug，可以查看客户端与服务器交互信息
  - 按钮Clear用于清空交互信息
  - 按钮DB ON/DB OFF用于显示当前公用数据库连接状态。公用数据库连接字符串在配置文件中
  - 选项Restar night 选中此项后，服务程序将在夜间（凌晨2点~5点）无人使用时自动重启（可能有10秒左右服务不可用）
  - 按钮Exit用于退出系统

### 配置文件

DeWebServer的配置文件为同目录下的config\.json文件，基本如下

```json
{
	"port": 80,
	"resource": 0,
	"third": "http://cdn.delphibbs.com",
	"redir": [
		["mm","hello.dw"],
		["gg","login.dw"]
	],
	"upload_dir":"upload",
	"max_upload_size":60,
	"errorhtml": "<html><body><br/><p style='text-align:center'>DeWeb web not exist !</p></body></html>",
	"connectionstring": "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=DeWeb.mdb",
	"disconnect": "网络已断线，请刷新！"
}
```

其中：

- __port__ : 整型，为默认启动时的端口；

- __resource__ : 整型，为启动时资源文件的位置。0表示本地源，1表示公用源，2表示第三方源；

- __third__ : 字符串型，和resource为2时配合使用，为第三方源网址；

- __redir__ : 字符串二维数组，为自动地址切换表，每组由2个字符串组成。如：["mm","hello.dw"]；

当访问http://127.0.0.1/mm的时候，DeWebServer会自动打开http://127.0.0.1/hello.dw；

- __upload\_dir__:为上传文件存放目录；

- __max\_upload\_size__为上传文件最大size，单位为MB

- __errorhtml __: 字符串型，为应用不存在时的提示（HTML格式）。

- __connectionstring__ : 字符串型，为公用数据库ADOConnection的连接字符串。

- __disconnect__ : 字符串型，为网络断线时的提示字符串。

