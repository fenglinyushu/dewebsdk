<!DOCTYPE html>
<html lang="zh-CN">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>DeWeb - Mp3 player</title>
</head>

<body style="background-color:#FFFFFF">
<script src="dist/vue.js" type="text/javascript"></script>
<script src="dist/index.js" type="text/javascript"></script>
<script src="dist/axios.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="dist/theme-chalk/index.css" />

    <div id="app" style="position:absolute;overflow-x:hidden;overflow-y:auto;left:0;top:0;right:0;bottom:0;margin: 0 auto;background-color:#FFFFFF" :style="{width:Form1_7__wid,height:Form1_7__hei}" >
<el-dialog :title="input_query_caption" :visible.sync="input_query_visible" >
<el-form style="width:90%;padding-left:5%;">
<el-form-item :label="input_query_inputname" >
<el-input v-model="input_query_inputdefault" style="border:solid 1px #DCDFE6;border-radius: 2px;" autocomplete="off"></el-input>
</el-form-item>
</el-form>
<div slot="footer" class="dialog-footer">
<el-button @click="input_query_visible=false">{{input_query_cancelcaption}}</el-button>
<el-button type="primary" @click="processinputquery">{{input_query_okcaption}}</el-button>
</div>
</el-dialog>
<iframe id="id_iframe" name="upload_iframe" style="display:none;"></iframe>
<el-main id="Panel_Full" v-if="Panel_Full__vis" :disabled="Panel_Full__dis" :style="{backgroundColor:Panel_Full__col,left:Panel_Full__lef,top:Panel_Full__top,width:Panel_Full__wid,height:Panel_Full__hei}" style="position:relative;overflow:hidden;">
<div  class="dwdisselect" id="Label_Name" v-if="Label_Name__vis" :disabled="Label_Name__dis" :style="{'line-height':Label_Name__hei,left:Label_Name__lef,top:Label_Name__top,width:Label_Name__wid,height:Label_Name__hei}" style="position:absolute;color:#646464;font-family:'微软雅黑';font-size:14pt;font-weight:bold;font-style:normal;text-decoration:none;text-align:center;"><nobr>{{Label_Name__cap}}
</nobr>
</div>
<div id="MediaPlayer1__frm" v-if="MediaPlayer1__vis" :style="{left:MediaPlayer1__lef,top:MediaPlayer1__top,width:MediaPlayer1__wid,height:MediaPlayer1__hei}" style="position:absolute;">
    <audio id="MediaPlayer1" :preload="true" :src="MediaPlayer1__src" :autoplay="MediaPlayer1__aut" :loop="MediaPlayer1__loo" :controls="MediaPlayer1__vis" style="width:100%;height:100%">
    </audio>
</div>
<div id="ScrollBox1" v-if="ScrollBox1__vis" :disabled="ScrollBox1__dis" :style="{left:ScrollBox1__lef,top:ScrollBox1__top,width:ScrollBox1__wid,height:ScrollBox1__hei}" style="position:absolute;">
<el-scrollbar ref="ScrollBox1" style="height:100%;" @scroll="dwevent($event,'ScrollBox1','0','onscroll','2626808')">
<el-main id="Panel_Buttons" v-if="Panel_Buttons__vis" :disabled="Panel_Buttons__dis" :style="{backgroundColor:Panel_Buttons__col,left:Panel_Buttons__lef,top:Panel_Buttons__top,width:Panel_Buttons__wid,height:Panel_Buttons__hei}" style="position:relative;overflow:hidden;">
<el-button id="Button_Audio1" size=small v-if="Button_Audio1__vis" :disabled="Button_Audio1__dis" :type="Button_Audio1__typ" :icon="Button_Audio1__icn" :style="{left:Button_Audio1__lef,top:Button_Audio1__top,width:Button_Audio1__wid,height:Button_Audio1__hei}" style="position:absolute;" @click="dwevent($event,'Button_Audio1','0','onclick','2626808')">{{Button_Audio1__cap}}<i :class="Button_Audio1__rin"></i>
</el-button>
<el-button id="Button_Audio2" size=small v-if="Button_Audio2__vis" :disabled="Button_Audio2__dis" :type="Button_Audio2__typ" :icon="Button_Audio2__icn" :style="{left:Button_Audio2__lef,top:Button_Audio2__top,width:Button_Audio2__wid,height:Button_Audio2__hei}" style="position:absolute;" @click="dwevent($event,'Button_Audio2','0','onclick','2626808')">{{Button_Audio2__cap}}<i :class="Button_Audio2__rin"></i>
</el-button>
</el-main>
</el-scrollbar>
</div>
<form id="BitBtn_Upload__frm" v-if="BitBtn_Upload__vis" :disabled="BitBtn_Upload__dis" :style="{left:BitBtn_Upload__lef,top:BitBtn_Upload__top,width:BitBtn_Upload__wid,height:BitBtn_Upload__hei}" style="position:absolute;" action="/dwupload" method="POST" enctype="multipart/form-data" target="upload_iframe">
<input id="BitBtn_Upload__inp" type="FILE" name="file" style="display:none" accept=".mp3,.wav" @change=dwInputSubmit(2626808,'BitBtn_Upload');>
<el-button id="BitBtn_Upload__btn" size=medium v-if="BitBtn_Upload__vis" :disabled="BitBtn_Upload__dis" :type="BitBtn_Upload__typ" icon="el-icon-upload" circle style="width:100%;height:100%;" @click="dwInputClick('BitBtn_Upload__inp');">{{BitBtn_Upload__cap}}
</el-button>
</form>
</el-main>
</div>
<script>
Vue.prototype.dwsetcookie = function (c_name, value, expiredays) {
var exdate = new Date();
exdate.setDate(exdate.getDate() + expiredays);
document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString()); 
},
Vue.prototype.dwgetcookie = function (name) {
var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)"); 
if(arr=document.cookie.match(reg))
return unescape(arr[2]); 
else
return '';
},
Vue.prototype.procResp = function (data){
if (data.m === "update"){
eval(String(data.o));
} else if (data.m === "html"){
document.body.innerHTML="";document.write(String(data.o));document.close();
} else if (data.m === "showform"){
document.open();document.write(String(data.o));
}
} 
new Vue(
{
el: '#app',
data: function () {
return {
image_preview_list:[],
Form1_7__top:"30px",
Form1_7__wid:"360px",
Form1_7__hei:"720px",
Label_Name__lef:"0px",
Label_Name__top:"0px",
Label_Name__wid:"350px",
Label_Name__hei:"65px",
Label_Name__vis:true,
Label_Name__dis:false,
Label_Name__cap:"夜的钢琴曲",
MediaPlayer1__lef:"0px",
MediaPlayer1__top:"65px",
MediaPlayer1__wid:"343px",
MediaPlayer1__hei:"47px",
MediaPlayer1__vis:true,
MediaPlayer1__loo:false,
MediaPlayer1__aut:true,
MediaPlayer1__src:"media/audio/夜的钢琴曲.mp3",
Button_Audio1__lef:"10px",
Button_Audio1__top:"3px",
Button_Audio1__wid:"320px",
Button_Audio1__hei:"34px",
Button_Audio1__vis:true,
Button_Audio1__dis:false,
Button_Audio1__cap:"鹿先森乐队-春风十里.mp3",
Button_Audio1__typ:"primary",
Button_Audio1__icn:"",
Button_Audio1__rin:"",
Button_Audio2__lef:"10px",
Button_Audio2__top:"43px",
Button_Audio2__wid:"320px",
Button_Audio2__hei:"34px",
Button_Audio2__vis:true,
Button_Audio2__dis:false,
Button_Audio2__cap:"云菲菲-邂逅.mp3",
Button_Audio2__typ:"primary",
Button_Audio2__icn:"",
Button_Audio2__rin:"",
Panel_Buttons__lef:"3px",
Panel_Buttons__top:"3px",
Panel_Buttons__wid:"340px",
Panel_Buttons__hei:"263px",
Panel_Buttons__vis:true,
Panel_Buttons__dis:false,
Panel_Buttons__col:"RGB(255,255,255,1.0)",
ScrollBox1__lef:"0px",
ScrollBox1__top:"112px",
ScrollBox1__wid:"350px",
ScrollBox1__hei:"598px",
ScrollBox1__vis:true,
ScrollBox1__dis:false,
ScrollBox1__typ:"",
ScrollBox1__ost:0,
BitBtn_Upload__lef:"303px",
BitBtn_Upload__top:"13px",
BitBtn_Upload__wid:"36px",
BitBtn_Upload__hei:"36px",
BitBtn_Upload__vis:true,
BitBtn_Upload__dis:false,
BitBtn_Upload__cap:"",
BitBtn_Upload__typ:"",
Panel_Full__lef:"0px",
Panel_Full__top:"0px",
Panel_Full__wid:"350px",
Panel_Full__hei:"710px",
Panel_Full__vis:true,
Panel_Full__dis:false,
Panel_Full__col:"RGB(255,255,255,1.0)",
input_query_visible:false,
input_query_caption:"Input Query",
input_query_inputname:"new",
input_query_cancelcaption:"Cancel",
input_query_okcaption:"OK",
input_query_inputdefault:"",
input_query_method:"processinputquery",
input_query_handle:0,
input_query_visible:false,
version__istrial:false,
clientid:2626808,
shuntflag:0
}
},
mounted() {
let me=this;
window.addEventListener('beforeunload', e => this.beforeunloadHandler(e));
window.addEventListener(
"resize" ,
function() {
var os = function (){
var ua = navigator.userAgent,
isWindowsPhone = /(?:Windows Phone)/.test(ua),
isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone,
isAndroid = /(?:Android)/.test(ua),
isFireFox = /(?:Firefox)/.test(ua),
isChrome = /(?:Chrome|CriOS)/.test(ua), 
isTablet = /(?:iPad|PlayBook)/.test(ua) || (isAndroid && !/(?:Mobile)/.test(ua)) || (isFireFox && /(?:Tablet)/.test(ua)),
isPhone = /(?:iPhone)/.test(ua) && !isTablet ,
isPc = !isPhone && !isAndroid && !isSymbian;
if (isPc) {
return 1;
} else if (isAndroid){
return 2;
} else if (isPhone){
return 3;
} else if (isTablet){
return 4;
} else {
return 0;
}
}

axios.post('{"m":"event","i":2626808,"c":"_screen","os":'+os()+',"orientation":"'+window.orientation+'","clientwidth":'+document.documentElement.clientWidth+',"clientheight":'+document.documentElement.clientHeight+',"innerwidth":'+innerWidth+',"innerheight":'+innerHeight+',"availwidth":'+screen.availWidth+',"availheight":'+screen.availHeight+',"bodywidth":'+document.body.clientWidth+',"bodyheight":'+document.body.clientHeight+',"devicepixelratio":'+devicePixelRatio+',"width":'+screen.width+',"height":'+screen.height+'}',{headers:{shuntflag:0}})
.then(resp =>{me.procResp(resp.data)});
},
false
);
let Form1_7hearttimer = window.setInterval(function() {
axios.post('{"m":"heart","i":2626808}',{headers:{shuntflag:0}})
.then(resp =>{me.procResp(resp.data)})
.catch((error) =>{me.dwnotify("Info","Network is disconnected!");clearInterval(Form1_7hearttimer);});
}, 290000);
},
methods: {
ToWebsite (e,n) {
var aTag = document.createElement('a'); 
aTag.setAttribute('href', e);
aTag.setAttribute('target', n);
aTag.click();
},
dwInputClick (e) {
document.getElementById(e).click();
},
dwInputChange (fid,e) {
this[e+"__cap"] = document.getElementById(e+"__inp").files[0].name;
var sget = '{"m":"event","i":"'+fid+'","c":"'+e+'","e":"getfilename","v":"'+escape(document.getElementById(e+"__inp").files[0].name)+'"}';
axios.post(sget)
},
filterHandler(value, row, column) {
const property = column['property'];
return row[property] === value;
},
dwInputSubmit (fid,ipname) {
let me=this;let formData = new FormData();
formData.append('file', document.getElementById(ipname+"__inp").files[0]);
let config = {headers: {'Content-Type': 'multipart/form-data','clientid': '2626808'}}
var sstart = '{"m":"event","i":"'+fid+'","c":"'+ipname+'","e":"onstartdock","v":"start"}';
axios.post(sstart)
.then(resp =>{me.procResp(resp.data)});
axios.post('/upload', formData, config)
.then(function (res) {
var sget = '{"m":"event","i":"'+fid+'","c":"'+ipname+'","e":"onenddock","v":"success"}';
axios.post(sget)
.then(resp =>{me.procResp(resp.data)});
document.getElementById(ipname+"__inp").value = null;
})
},
dwInputSubmit0 (ipname) {
document.getElementById(ipname+"__frm").submit();
},
beforeunloadHandler (e) {
e = e || window.event
if (e) {
axios.post('{"m":"onbeforeunload","i":2626808}',{headers:{shuntflag:0}})
}
},
dwnotify(caption,text) {this.$notify.warning({ title: caption, message: text, duration: 0,showClose: false });},
dwexecute(code) {
eval(code);
},
dwevent(val,compname,compvalue,compevent,handle) {
var jo={};
jo.m="event";
jo.i=handle;
jo.c=compname;
jo.v=escape(eval(compvalue))
jo.e=compevent;
axios.post(escape(JSON.stringify(jo)),{headers:{shuntflag:0}})
.then(resp =>{this.procResp(resp.data)});
},
processinputquery(val) {
this.input_query_visible = false;
axios.post('{"m":"interaction","i":'+this.input_query_handle+',"s":"inputquery","t":"'+this.input_query_method+'","v":"'+escape(this.input_query_inputdefault)+'"}',{headers:{shuntflag:0}})
.then(resp =>{this.procResp(resp.data)});
},
},
beforeDestroy() {
clearInterval(hearttimer);
window.removeEventListener('beforeunload', e => this.beforeunloadHandler(e));
}
}
); 
</script>
</body>
</html>
